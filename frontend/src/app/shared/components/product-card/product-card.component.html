<mat-card class="product-card" (click)="onCardClick()">
    <div class="product-image-container">
        @if (product.images && product.images.length > 0) {
        <img mat-card-image [src]="product.images[0]" [alt]="product.name" class="product-image" />
        } @else {
        <div class="no-image">
            <mat-icon>inventory_2</mat-icon>
        </div>
        }

        <div class="badges">
            @if (product.featured) {
            <mat-chip-option color="accent" selected>Featured</mat-chip-option>
            }
            @if (!product.inStock) {
            <mat-chip-option color="warn" selected>Out of Stock</mat-chip-option>
            }
        </div>
    </div>

    <mat-card-content class="product-content">
        <div class="product-header">
            <p class="product-category text-secondary">{{ product.categoryName || 'Uncategorized' }}</p>
            @if (product.brand) {
            <span class="product-brand text-secondary">by {{ product.brand }}</span>
            }
        </div>
        <h3 class="product-name">{{ product.name }}</h3>

        <div class="product-footer">
            <span class="product-price">{{ product.price | currency:'INR' }}</span>
        </div>
    </mat-card-content>

    @if (!authService.isAdmin()) {
    <mat-card-actions align="end" (click)="$event.stopPropagation()">
        <button mat-raised-button color="primary" (click)="onAddToCart($event)" [disabled]="!product.inStock">
            <mat-icon>add_shopping_cart</mat-icon>
            {{ product.inStock ? 'Add' : 'Sold Out' }}
        </button>
    </mat-card-actions>
    }
</mat-card>